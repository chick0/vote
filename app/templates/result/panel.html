{% extends 'layout.html' %}
{% block content %}
<section class="section">
    <div class="container">
        <div class="columns">
            <div class="column">
                <h1 class="title">투표 결과</h1>
                <p class="subtitle">{{ title }}</p>
        
                <div class="content is-large">
                    <p>투표에는 총 <b>{{ votes }}명</b>이 참여했습니다.</p>
                    <p>기권표는 총 <b>{{ drop }}개</b>가 있습니다.</p>
                </div>

                <a class="button is-info is-light is-large is-fullwidth" href="{{ url_for('vote.create') }}">새로운 투표 만들기</a>
            </div>
            <div class="column">
                <canvas id="chart"></canvas>
            </div>        
        </div>
    </div>
</section>
{% endblock %}

{% block script %}
<script src="{{ url_for('static', filename='js/chart.min.js') }}"></script>
<script>
    const data = {
        labels: {{ option.values()|list|safe }},
        datasets: [{
            label: '투표 결과',
            backgroundColor: {{ colors|list|safe }},
            data: {{ score.values()|list }},
        }],
    };

    const chart = new Chart(
        document.getElementById('chart'),
        {
            type: 'doughnut',
            data: data,
            options: {},
        }
    );
</script>
{% endblock %}